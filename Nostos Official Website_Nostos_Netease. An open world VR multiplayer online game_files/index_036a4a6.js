"use strict"; function _classCallCheck(e, s) { if (!(e instanceof s)) throw new TypeError("Cannot call a class as a function") } var _createClass = function () { function e(e, s) { for (var t = 0; t < s.length; t++) { var o = s[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, o.key, o) } } return function (s, t, o) { return t && e(s.prototype, t), o && e(s, o), s } }(); nie.define("Index", function () { var e = { scrollType: !0, setMusic: !0, isShowLoading: !0, isControlNavbar: !0 }, s = void 0, t = ["https://nostos.res.netease.com/pc/gw/20180711232847/data/nostos_website_amb01_wind_loop_02.mp3", "https://nostos.res.netease.com/pc/gw/20180711232847/data/nostos_website_amb02_rain_loop_02.mp3", "https://nostos.res.netease.com/pc/gw/20180711232847/data/nostos_website_amb03_praire_loop_02.mp3"], o = ["https://nostos.res.netease.com/pc/gw/20180711232847/data/nostos_website_thunder_oneshot.mp3", "https://nostos.res.netease.com/pc/gw/20180711232847/data/nostos_website_birds_oneshot.mp3"], n = 0, a = 2, c = 0, i = !0, p = null, r = null, g = null, l = null, m = !1, h = null, d = !1, _ = nie.require("Loader"), w = nie.require("Weather"), f = nie.require("nie.util.videoV2"), u = nie.require("nie.util.PopDialog"), b = 2560, v = 368, C = b / v, x = 2560, y = 368, T = x / y, S = 2560, k = 368, I = S / k, j = 2560, q = 1558, z = j / q, W = 50, A = 2560, L = 1249, M = A / L, O = 1280, P = 768, R = 100, U = $("#role"), H = $("#tree"), B = $("#chip"), F = ($("#floor-06"), $("#floor-07")), D = $("#floor-08"), E = $("#floor-09"), J = $("#navbar"), X = $(".ui-animele"), N = $("#leftCloud"), V = $("#rightCloud"), Y = ($("#centerCloud"), $("#bigCloud"), $(window)), G = $("#bgMusic"), K = $("#canvas"), Q = $("#bird"), Z = $("#rain"), es = $(".J-totop"), ss = $("#scrollTips"), ts = ($("#firefly"), $(".scene-02"), $("#parallaxWeather")), os = $("#slogan2"), ns = $("#rainWrap"), as = $("#rainRole"), cs = $("#sunnyRole"), is = $("#music"), ps = $("#videoPop"), rs = $("#roundMusic"), gs = $("#oneMusic"), ls = ($(".close"), $(".pop")), ms = 1, hs = 2, ds = "Welcome to the vast, tranquil world of Nostos. As survivors we will fight together, build together, and travel shoulder to shoulder through this unknown land. I hope during our journey we will be able uncover, piece by piece, secrets that have been lost to the sands of time.", _s = ($("#shareTxt"), ds.length, X.length), ws = Y.width(), fs = Y.height(), us = ws / 2, bs = fs / 2, vs = fs > P ? fs : P, $s = { x: 0, y: 0 }, Cs = [], xs = {}, ys = !1, Ts = !1, Ss = 0; xs.curScrollTop = 0; var ks = 0, Is = .03, js = 0, qs = .4, zs = void 0, Ws = void 0, As = void 0, Ls = void 0, Ms = void 0, Os = void 0, Ps = void 0, Rs = void 0, Us = void 0, Hs = void 0, Bs = void 0, Fs = void 0, Ds = void 0, Es = void 0, Js = void 0, Xs = function () { Ns(), Vs(), tt(), Gs(), Qs(), rt(0), ct(), ht(), e.setMusic && pt() }, Ns = function () { var e = window.location.href; $(".nav-register").on("click", function () { -1 != e.indexOf("cn") ? lt.toTop() : window.location.href = "//nostos.163.com/register/" }) }, Vs = function () { function e(e) { xs.addScrollTop(e) } var s = $("#wrap")[0]; $(s).addClass("metro-container"), $(s).addClass("metro-vertical"), $(s).addClass("metro-js-scroller"); { var t = ""; Operate.create({ container: s, onWheel: function (s, o) { t = -s.wheelDelta / 120 || s.detail / 3, t = .5 * t, e(t * R, self, o) }, onMove: function () { } }) } xs = new Scroller({ container: s, orient: "vert", onScrollEnd: function () { }, onScroll: function () { } }) }, Ys = function () { var e = ["https://nostos.res.netease.com/pc/gw/20180711232847/img/angle_f28af68.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/arr_57c9eef.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/arr_1_f989f30.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/arr_1_h_1ed8ede.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/arrow_2595763.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/bird_657a064.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/btn_1_197469f.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/btn_2_6cc07a0.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/btn_3_95f25a2.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/btn_4_0d403cd.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/btn_5_3b3e1f6.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/chip/chip_1_3653675.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/chip/chip_2_f887b26.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/chip/chip_3_543c7c3.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/chip/chip_4_6e8fb2c.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/chip/chip_5_6f5fb57.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/chip/chip_6_a6fa20b.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/chip/chip_7_56d56d1.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/chip/chip_8_48d32cd.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/chip/chip_9_5645f87.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/class_415208b.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/cloud_7f7e751.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/cloud/cloud_1_4754ad1.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/cloud/cloud_2_4516ddb.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/copyright_06cbf37.jpg", "https://nostos.res.netease.com/pc/gw/20180711232847/img/copyright_ae35883.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/data/class_415208b.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/data/rain_around_bab7b37.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/data/rain_role_1_10a296e.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/data/sunny_role_1_354d1c1.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/en/share_bg_en_bc803fd.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/en/slogan_f4051cc.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/facebook_6dd0d4a.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/facebook_h_9cfe3ac.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/fb_share_d3ae8d4.jpg", "https://nostos.res.netease.com/pc/gw/20180711232847/img/floor_1_8fe7893.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/floor_2_b262ffc.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/floor_3_086ef5d.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/floor_4_98ffe4d.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/floor_5_86a004f.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/floor_6_057c249.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/floor_7_fd3126e.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/floor_8_e7be86a.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/floor_9_1e44632.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow/flow_1_8fa4a38.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow/flow_1_b_954cb8c.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow/flow_2_5c2abe8.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow/flow_2_b_163d5a2.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow/flow_3_41642d5.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow/flow_3_b_0b58c33.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow/flow_4_8415b1b.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow/flow_4_b_158af9f.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow/flow_5_c7262d8.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow/flow_5_b_9047052.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow/flow_6_f88b64e.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow/flow_6_b_a370f71.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow_loading/p_1_de47e37.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow_loading/p_2_342fbab.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow_loading/p_3_0118eea.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow_loading/p_4_53b17b6.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow_loading/p_5_3110bac.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/flow_loading/p_6_bb48020.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/fog_01e2d83.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/ground_4debe8c.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/i_1_ce88023.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/i_2_44756d0.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/i_3_4646d34.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/leaves/leaf_1_526d058.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/leaves/leaf_2_b8e9df4.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/leaves/leaf_3_7e7e262.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/leaves/leaf_4_225e8eb.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/leaves/leaf_5_cc3d6d6.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/leaves/leaf_6_f318fe1.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/leaves/leaf_7_48fca3e.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/loading_1_3f2c355.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/loading_2_e515155.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/logo_04fb027.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/logo_1_255342a.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/logo_3_d61bcde.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/logo_s_accddae.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/logo_shadow_becf9f0.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/m_1_8c42fd6.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/m_2_eeda90f.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/m_3_300a311.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/main_bg_1_a0ab0c5.jpg", "https://nostos.res.netease.com/pc/gw/20180711232847/img/main_bg_3_0b489cd.jpg", "https://nostos.res.netease.com/pc/gw/20180711232847/img/more_e744c25.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/more_2_489c380.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/more_3_0496031.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/more_3_1_b8eca9c.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/more_l_cab7945.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/more_l_1_78fbfc8.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/more_l_2_d3a5e97.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/music_dd8005b.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/mv_bg_f6247a5.jpg", "https://nostos.res.netease.com/pc/gw/20180711232847/img/page_bg_pc_ab59b44.jpg", "https://nostos.res.netease.com/pc/gw/20180711232847/img/piece/p_1_09b15df.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/piece/p_2_662b486.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/piece/p_3_7422d30.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/pop_close_747b214.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/qrcode_line_5d432c4.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/rain_6bf0039.jpg", "https://nostos.res.netease.com/pc/gw/20180711232847/img/rain/rain_912e551.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/rain_around_6c55484.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/rain_role_1_10a296e.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/register-btn-1-h_fc2669a.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/register-btn-1_7f05e9c.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/register-btn-p_2528696.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/register-btn-p1_e1ce03f.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/register-btn_ac148fb.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/register-star.bak_13ab682.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/register-star_3292df1.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/share_e2eaa84.jpg", "https://nostos.res.netease.com/pc/gw/20180711232847/img/share_bg_2fb2ac0.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/share_btn_4d6c6c9.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/slogan_2b3a109.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/slogan_piece/p_1_ed138e9.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/slogan_piece/p_2_c236f57.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/slogan_piece/p_3_6696ab1.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/smoke_1_b864117.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/smoke_2_873dcce.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/sunny_72f0f3c.jpg", "https://nostos.res.netease.com/pc/gw/20180711232847/img/sunny_role_1_354d1c1.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/tips/arr_8be4bdf.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/tips/down_88dfa0d.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/tips/ico_325f36c.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/tips/light_3370435.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/tips_btn_0898355.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/tittext_0f06315.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/to_aba1aeb.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/totop_68130f3.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/totop_l_14cbd81.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/totop_r_05dbaa1.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/tree_e9deedf.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/twitter_734dcfb.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/twitter_h_18dda3f.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/wb_1a50599.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/wb_h_b380393.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/weibo_ea3a8df.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/weixin_523df14.jpg", "https://nostos.res.netease.com/pc/gw/20180711232847/img/wx_7e9ab21.png", "https://nostos.res.netease.com/pc/gw/20180711232847/img/wx_h_4e88c5b.png"]; _.show({ iFileData: e, bgColor: "#000", mainWrap: "#wrap", defaultAnimation: !0, isSetOpacity: !0, customAnimation: function () { }, beforeCallback: function () { w.init() }, completeCallback: function () { window.cancelAnimFrame(s), Xs() } }) }, Gs = function () { function e() { var e = window.location.href; -1 != e.indexOf("#zjyx") ? xs.toScrollTop(1666.5625) : -1 != e.indexOf("#spage") && xs.toScrollTop(5500) } (window.ActiveXObject || "ActiveXObject" in window || navigator.userAgent.indexOf("Trident") > -1) && $("head").append("<link rel='stylesheet' type='text/css' href='https://nostos.res.netease.com/pc/gw/20180711232847/css/for_ie_bf97453.css'>"), $(window).bind("resize", function () { ws = Y.width(), fs = Y.height(), us = ws / 2, bs = fs / 2, vs = fs > P ? fs : P, xs.update(!0), Qs(), w.resize() }), $(document).mousemove(function (e) { $s.x = e.pageX - us, $s.y = e.pageY - bs }), lt.toTop(), $(xs.container).bind("scroll", it), $(xs.container).bind("scroll", function () { Ts || (Ts = !0, setTimeout(function () { tt(), Ss > vs / 12 ? ss.removeClass("show") : ss.addClass("show"), Ts = !1 }, 500)) }); var s = ""; $("#navbar").delegate(".nav-item-link", "click", function () { var e = $(this), t = e.index(); return e.hasClass("news-link") ? void u.Alert(e.data("wait")) : (2 == t ? s = $("#floor-01").offset().top + xs.curScrollTop : 3 == t ? s = $(".scene-02").offset().top + xs.curScrollTop + $(".detail-part-01 .more").height() : 5 == t && (s = $(".share-wrap").offset().top + xs.curScrollTop), void xs.toScrollTop(s)) }), e(), $("#navbar").delegate(".nav-item-link", "mouseover", function () { var e = $(this), s = e.index(); _isSetLine = !0, $("#navbarLine").removeClass().addClass("show navbar-line-" + s) }), $("#navbar").delegate(".nav-item-link", "mouseleave", function () { _isSetLine = !1, $("#navbarLine").removeClass("show") }), $(".scroll-box").bind("click", function () { s = $(".slogan-wrap").offset().top + xs.curScrollTop, xs.toScrollTop(s) }); var t = { title: $("#share_title").html(), link: "https://nostos.163.com/en/index.html", desc: $("#share_desc").html(), pic: $("#share_pic").attr("data-src"), fbPic: $("#share_pic").attr("data-fb-src") }; $("#Jfacebook").on("click", function () { window.open("https://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent(t.link) + "&description=" + encodeURIComponent(t.desc) + "&title=" + encodeURIComponent(t.title) + "&display=popup&ref=plugin&src=share_button", "facebook", "height=500, width=750, top=" + ($(window).height() / 2 - 250) + ", left=" + (document.body.offsetWidth / 2 - 375) + ", toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no") }), $("#Jtwitter").on("click", function () { window.open("http://twitter.com/home/?status=" + encodeURIComponent(t.title) + " " + encodeURIComponent(t.link), "twiiter", "height=300, width=600, top=" + (document.body.offsetHeight / 2 - 150) + ", left=" + (document.body.offsetWidth / 2 - 300) + ", toolbar=no, menubar=no, scrollbars=no, resizable=no,location=no, status=no") }), $("#shareBtnEn").delegate(".share-btn", "mouseover", function () { var e = $(this).index(); $(this).hasClass("active") || ($(this).addClass("active").siblings().removeClass("active"), $("#shareBoxEn .share-item").eq(e).addClass("active").siblings().removeClass("active"), $(".share-media-wrap .share-media").eq(e).addClass("active").siblings().removeClass("active")) }), $("#shareBtnCh").delegate(".share-btn", "mouseover", function () { var e = $(this); e.hasClass("active") || (e.addClass("active").siblings().removeClass("active"), $("#shareChImg").hasClass("show") ? ($("#shareChImg").removeClass("show"), clearTimeout(h), h = setTimeout(function () { $("#shareChImg").addClass("show"), $(".qrcode-img").removeClass("active"), e.hasClass("share-wx") ? ($(".media-wx").addClass("active"), $("#shareChImg .media-desc").text("\u5fae\u4fe1\u626b\u7801\u5173\u6ce8")) : ($(".media-wb").addClass("active"), $("#shareChImg .media-desc").text("\u5fae\u535a\u626b\u7801\u5173\u6ce8")) }, 3800)) : $("#shareChImg").addClass("show")) }), $("#videoBtn").bind("click", function () { var e = $(this).data("link"); e ? (Ks(e), G.hasClass("pause") ? d = !1 : (d = !0, G.trigger("click")), Common.fn.modalShow(ps)) : u.Alert($(this).data("wait")) }), $("#videoPop .close").click(function () { $("#videoWrap").html(""), Common.fn.modalHide(ls), d && G.trigger("click") }) }, Ks = function (e) { f({ fat: "#videoWrap", width: "854", height: "480", movieUrl: e, HDmovieUrl: e, SHDmovieUrl: e, autoPlay: !0 }) }, Qs = function () { var e = fs > P ? fs : P; $(".bg").each(function () { var s = $(this), t = s.width(), o = (s.height(), parseInt(s.attr("data-img-width"))), n = parseInt(s.attr("data-img-height")), a = o / n; n = e, o = n * a, t > o && (o = t, n = o / a), s.data("resized-imgW", o), s.data("resized-imgH", n), s.find(".bg-img").each(function () { $(this).css({ width: o, height: n }) }) }), c = $(".detail-part-01").height() }, Zs = function () { Ss = xs.curScrollTop, zs = Ss + vs, _isSetFirefly = !1, _isSetLeaf = !1, _isSetSmoke = !1, $(".parallax").each(function () { var e = $(this), s = e.height(), t = "", o = "", n = ""; if (t = e.offset().top + Ss, o = t + s, n = Ss - t, zs > t && o > Ss) { var a = (e.data("resized-imgW"), e.data("resized-imgH")), c = 0, i = -a + vs, p = (Ss - t) / (s - fs) * (i - c) + n; if (e.hasClass("parallax-03") && zs >= o) { if (!(p + a > s)) return; p = s - a } e.find(".bg-wrap")[0].translate3d(0, p + "px", 0), Ws = O > ws ? O : ws, e.hasClass("parallax-01") && (_isSetFirefly = !0, Ss >= t + vs && (Bs = Ws / C, Fs = Ws / T * 2 / 3, Ds = Ws / I * 3 / 4, F[0].translate3d(0, Bs * (Ss - t - vs) / vs + "px", 0), D[0].translate3d(0, Fs * (Ss - t - vs) / vs + "px", 0), E[0].translate3d(0, Ds * (Ss - t - vs) / vs + "px", 0))), e.hasClass("parallax-02") && (Ss > t + 3 * hs / 4 * vs ? (_isSetLeaf = !0, Z.css({ opacity: 0 }), as.css({ opacity: 0 }), cs.css({ opacity: 1 }), B.css({ opacity: 0 }), K.css({ opacity: 1 }), ns.css({ opacity: 0 })) : (Z.css({ opacity: 1 }), as.css({ opacity: 1 }), cs.css({ opacity: 0 }), B.css({ opacity: 1 }), K.css({ opacity: 0 }), ns.css({ opacity: 1 }))) } }), Us = Ws / z, 0 >= $(".parallax-02").offset().top - fs + Us && 0 <= $(".parallax-02").offset().top + $(".parallax-02").height() - fs ? U[0].translate3d(0, W * (-$(".parallax-02").offset().top - Us + fs) / ($(".parallax-02").height() - Us) - $(".parallax-02").offset().top - (Us - fs) + "px", 0) : $(".parallax-02").offset().top - fs + Us > 0 ? U[0].translate3d(0, 0, 0) : U[0].translate3d(0, W - fs + $(".parallax-02").height() - (Us - fs) + "px", 0), Hs = Ws / M, Es = Hs / 2, Js = Hs, 0 >= $(".parallax-02").offset().top && 0 <= $(".parallax-02").offset().top + 1.5 * vs ? (os[0].translate3d(0, Js * $(".parallax-02").offset().top / (1.5 * vs) - $(".parallax-02").offset().top + "px", 0), H[0].translate3d(0, Es * $(".parallax-02").offset().top / (1.5 * vs) - $(".parallax-02").offset().top + "px", 0)) : $(".parallax-02").offset().top > 0 ? (os[0].translate3d(0, 0, 0), H[0].translate3d(0, 0, 0)) : (os[0].translate3d(0, -Js + 1.5 * vs + "px", 0), H[0].translate3d(0, -Es + 1.5 * vs + "px", 0)) }, et = function () { Rs = ts.offset().top + Ss, Ms = (Ss - Rs - ms * vs) / (vs * (hs - ms)), 0 > Ms && (Ms = 0), Ms > 1 && (Ms = 1), Ps = Ms * Ws / 4, Math.abs(Ps - ks) < .1 && (Ps = ks, Os = Ms), Ms != ks && (ks += (Ps - ks) * Is, N[0].translate3d(-ks + "px", 0, 0), V[0].translate3d(ks + "px", 0, 0), Os += (Ms - Os) * Is, N.css({ opacity: 1 - Os }), V.css({ opacity: 1 - Os })) }, st = function () { Ls = (Ss - Rs - hs * vs) / vs / 2, 0 > Ls && (Ls = 0), Ls > 1 && (Ls = 1), As = -Ls * Ws * qs, Math.abs(As - js) < .1 && (As = js), As != js && (js += (As - js) * Is, Q[0].translate3d(js + "px", js + "px", 0)) }, tt = function () { Ss = xs.curScrollTop, Ss >= vs ? J.removeClass("hidden") : J.addClass("hidden"), Ss >= 6 * vs ? (a = 2, $("#navbar .nav-item-link").eq(4).addClass("active").siblings().removeClass("active"), m || (m = !0, $("#shareChImg").addClass("show"))) : Ss >= 2 * vs + c ? (3 * hs / 4 * vs + 2 * vs + c > Ss ? (1 != n && (n = 1, ot()), 0 != a && (a = 0, nt())) : (2 != n && (n = 2, ot()), 1 != a && (a = 1, nt())), $("#navbar .nav-item-link").eq(2).addClass("active").siblings().removeClass("active")) : (a = 2, 0 != n && (n = 0, ot()), $("#navbar .nav-item-link").eq(1).addClass("active").siblings().removeClass("active")) }, ot = function () { i && (window.clearInterval(p), window.clearInterval(r), window.clearTimeout(l), window.clearTimeout(g), p = setInterval(function () { rs[0].volume < .12 ? rs[0].volume = 0 : rs[0].volume -= .1 }, 100), l = setTimeout(function () { rs[0].volume = 0, rs[0].pause(), rs.attr("src", t[n]), rs[0].play(), window.clearInterval(p), r = setInterval(function () { rs[0].volume > .92 ? rs[0].volume = 1 : rs[0].volume += .1 }, 100) }, 1e3), g = setTimeout(function () { window.clearInterval(r) }, 2100)) }, nt = function () { i && (gs[0].pause(), gs.attr("src", o[a]), gs[0].play()) }, at = function () { $("#wrap").removeClass("hide"), Qs(), Ys(), gt(), _.start() }, ct = function () { return $.browser.msie && 9 > parseInt($.browser.version) ? void X.removeClass("ui-animele") : void it() }, it = function _t() { var e = void 0, s = $(window).height(); $.each(X, function (t, o) { o.init || (e = $(o), s > o.getBoundingClientRect().top && (e.removeClass("ui-animele"), o.init = !0, _s--)) }), _s || $(xs.container).unbind("scroll", _t) }, pt = function () { is[0].play(), rs[0].play(), G.bind("click", function () { $(this).hasClass("pause") ? (i = !0, is[0].play(), rs[0].play()) : (i = !1, is[0].pause(), rs[0].pause()), $(this).toggleClass("pause") }) }, rt = function wt(e) { xs.curScrollTop = Math.abs(xs.curScrollTop - xs.scrollTopTemp) > .1 ? xs.curScrollTop + .1 * (xs.scrollTopTemp - xs.curScrollTop) : xs.scrollTopTemp, xs.container.scrollTop = xs.curScrollTop, xs.scrollerHandle.translate3d(0, xs.curScrollTop / (xs.scrollSize - xs.clientSize) * (xs.scrollerBarSize - xs.handleSize) + 2 + "px", 0), Zs(), et(), st(), dt(), w.step(e), window.requestAnimFrame(wt) }, gt = function ft() { w.stepLoading(), s = window.requestAnimFrame(ft) }, lt = { toTop: function () { es.bind("click", function () { xs.toScrollTop(0) }) } }, mt = function () { function e(s) { _classCallCheck(this, e), this.ele = s.ele, this.rate = s.rate || .03, this.x = 0, this.y = 0, this.distance = s.distance || 50 } return _createClass(e, [{ key: "setPosition", value: function () { this.x += this.rate * ($s.x * this.distance / ws - this.x), this.y += this.rate * ($s.y * (this.distance / 2) / fs - this.y), this.ele[0].translate3d(this.x + "px", this.y + "px", 0) } }]), e }(), ht = function () { $(".J-chip").each(function () { var e = $(this); Cs.push(new mt({ ele: e, distance: e.data("distance") })) }) }, dt = function () { Cs.forEach(function (e) { e.setPosition() }) }; e.isShowLoading ? (at(), ys = !0) : ($("#wrap").removeClass("hide"), ys = !0, _isSetStar = !1, w.init(), Xs(), setTimeout(function () { $(".logo").addClass("fly"), $("#scrollTips").addClass("show") }, 300)) });